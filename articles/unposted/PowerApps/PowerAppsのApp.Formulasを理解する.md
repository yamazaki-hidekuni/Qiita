## App.Formulasとは？

App.Formulasは、PowerAppsアプリ内で定義される変数や関数のコレクションです。App.Formulasで定義された変数や関数は、アプリ内のどこからでも参照することができます。

App.Formulasは、以下のような目的で使用されます。

1. アプリ全体で共有する変数の定義
2. アプリ全体で共有する関数の定義
3. コードの再利用性の向上
4. アプリのメンテナンス性の向上

## App.Formulasの使い方

App.Formulasを使用するには、PowerAppsのエディタで「App.Formulas」タブを選択します。このタブでは、変数や関数を定義することができます。

### 変数の定義

App.Formulasで変数を定義するには、以下の構文を使用します。

```
変数名 = 値
```

例えば、`AppTitle`という変数を定義するには、以下のように記述します。

```
AppTitle = "My PowerApp"
```

この変数は、アプリ内のどこからでも`AppTitle`という名前で参照できます。

### 関数の定義

App.Formulasで関数を定義するには、以下の構文を使用します。

```
関数名(引数1, 引数2, ...) = 式
```

例えば、`Add`という関数を定義するには、以下のように記述します。

```
Add(x, y) = x + y
```

この関数は、アプリ内のどこからでも`Add(1, 2)`のように呼び出すことができます。

## App.Formulasの利点

App.Formulasを使用することで、以下のような利点があります。

1. コードの再利用性の向上：共通の変数や関数を定義することで、コードの重複を減らすことができます。
2. メンテナンス性の向上：変数や関数の定義を一箇所で管理することで、アプリの修正や更新が容易になります。
3. 可読性の向上：変数や関数に意味のある名前を付けることで、コードの可読性が向上します。
4. パフォーマンスの向上：共通の計算結果を変数に格納することで、計算のオーバーヘッドを減らすことができます。

## App.Formulasの使用例

以下は、App.Formulasの使用例です。

### 例1：アプリ全体で共有する定数の定義

```
AppVersion = "1.0.0"
AppAuthor = "John Doe"
```

これらの定数は、アプリ内のどこからでも参照できます。

### 例2：共通の計算ロジックの関数化

```
DiscountedPrice(price, discountRate) = price * (1 - discountRate)
```

この関数は、商品の価格と割引率から割引後の価格を計算します。アプリ内の複数の場所で同じ計算ロジックを使用する場合、この関数を呼び出すことで、コードの重複を避けることができます。

### 例3：グローバル変数の定義

```
CurrentUser = LookUp(Users, Email = User().Email)
```

この変数は、現在のユーザー情報を格納します。アプリ内の様々な場所で現在のユーザー情報が必要な場合、この変数を参照することで、データの整合性を保つことができます。