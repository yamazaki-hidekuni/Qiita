# C#の`var`キーワード

C#を書いていると、`int`、`string`、`List<T>`など、様々な型を指定する場面に遭遇します。しかし、`var`キーワードの登場により、型宣言がずっとシンプルになりました。この記事では、`var`キーワードについて、その使い方とメリット、注意点を解説します。

## `var`キーワードとは？

`var`はC# 3.0で導入されたキーワードで、変数の型をコンパイラに推論させるために使用します。つまり、変数を宣言する際に具体的な型名を書く代わりに`var`を使うと、コンパイラが代入される値から型を推測してくれるのです。

### `var`の基本的な使い方

```csharp
var number = 10; // intとして推論される
var name = "Alice"; // stringとして推論される
var isCompleted = false; // boolとして推論される
```

このコードでは、各変数の型がリテラルから明らかなため、`var`を使用しています。コンパイラはこれを見て、適切な型を推論します。

## `var`のメリット

### 1. コードの可読性の向上

`var`を使用すると、型名が長くて複雑な場合でも、コードが読みやすくなります。

```csharp
var complexObject = new Dictionary<int, List<Func<string, bool>>>();
```

この例では、`var`を使うことで、複雑なジェネリック型の宣言を避けることができます。

### 2. リファクタリングの容易さ

型を明示的に書かないことで、後からその型を変更する必要がある場合に、変数宣言を変更する手間が省けます。

```csharp
var result = GetSomeResult(); // このメソッドの戻り値の型を変更しても、ここは変更不要
```

### 3. エラーの減少

`var`を使用すると、型の不一致によるエラーを減らすことができます。コンパイラが正しい型を推論するため、人間が間違える余地が減ります。

## `var`の使用時の注意点

### 1. 初期化が必須

`var`キーワードを使用する場合、変数は宣言と同時に初期化する必要があります。

```csharp
var item; // コンパイルエラー
item = GetItem(); // 型が推論できないためエラーになる
```

### 2. 推論される型に注意

`var`を使用すると、意図しない型が推論されることがあります。特に数値リテラルの場合、整数は`int`、浮動小数点数は`double`と推論されるのがデフォルトです。

```csharp
var number = 1.0; // doubleとして推論される
```

### 3. コードの明示性

`var`を使うとコードが簡潔になりますが、時には型が明示されていないことで、コードの意図が読み取りにくくなることもあります。特に公開APIなど、他者が読むことを想定したコードでは注意が必要です。