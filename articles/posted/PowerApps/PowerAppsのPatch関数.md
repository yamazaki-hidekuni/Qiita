#### Patch関数とは？

Patch関数は、既存のレコードを更新するか、新しいレコードをデータソースに追加するために使用されます。この機能は、ユーザーがフォームを介さずにデータを直接操作したい場合に特に便利です。

#### 基本構文

Patch関数の基本的な構文は以下の通りです：

```
Patch(対象のデータソース, 更新するレコード, 更新内容)
```

- **対象のデータソース**: 更新または追加するデータが存在するデータソースを指定します。
- **更新するレコード**: どのレコードを更新するかを指定します。新しいレコードを追加する場合は、`Defaults(データソース名)`を使用して新しいレコードのテンプレートを生成します。
- **更新内容**: 実際に更新したいフィールドとその新しい値を、レコード形式で指定します。

#### 使用例

##### 例1: 既存レコードの更新

```PowerApps
Patch(顧客リスト, LookUp(顧客リスト, 顧客ID = 123), {顧客名: "新しい名前", 電話番号: "新しい電話番号"})
```

この例では、`顧客リスト`データソース内で`顧客ID`が123のレコードを検索し、その`顧客名`と`電話番号`を更新しています。

##### 例2: 新しいレコードの追加

```PowerApps
Patch(顧客リスト, Defaults(顧客リスト), {顧客ID: 124, 顧客名: "新規顧客", 電話番号: "新規電話番号"})
```

ここでは、`顧客リスト`に新しいレコードを追加しています。`Defaults(顧客リスト)`は新しいレコードのテンプレートを生成し、その後で指定したフィールドに値を設定しています。

#### Patch関数を効果的に使用するためのヒント

- **データ型の一致**: Patch関数を使用する際は、更新しようとしているフィールドのデータ型が、指定した値のデータ型と一致していることを確認してください。
- **エラーハンドリング**: Patch関数を使用する際は、操作が成功したかどうかを確認するためにエラーハンドリングを行うことが重要です。`If`関数や`Error`関数を使用して、エラーを検出し、適切に対応しましょう。