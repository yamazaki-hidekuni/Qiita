## PowerAppsの変数の種類

PowerAppsには主に3種類の変数があります。

### 1. コンテキスト変数（ローカル変数）

- **定義**: ある特定のスクリーン（画面）内でのみ有効な変数です。
- **使い方**: `UpdateContext({変数名: 値})` 関数を使用して設定します。
- **用途**: 特定のスクリーン内でのみ必要なデータを保持する場合に使用します。

### 2. グローバル変数

- **定義**: アプリケーション全体で共有され、どのスクリーンからもアクセス可能な変数です。
- **使い方**: `Set(変数名, 値)` 関数を使用して設定します。
- **用途**: アプリケーション全体で共有する必要があるデータを保持する場合に使用します。

### 3. コレクション

- **定義**: 複数のレコード（行）とフィールド（列）を持つテーブルのような変数です。
- **使い方**: `Collect(コレクション名, {フィールド名1: 値1, フィールド名2: 値2, ...})` 関数を使用してデータを追加します。
- **用途**: 複数のデータレコードを一括で扱う場合に使用します。

## 変数の使用例

以下は、PowerApps内での変数の使用例です。

### コンテキスト変数の例

あるスクリーン上でユーザーが入力したテキストを表示する例です。

```plaintext
// テキスト入力コントロール（TextInput1）の値をコンテキスト変数に格納
UpdateContext({UserInput: TextInput1.Text})

// 他のコントロールでコンテキスト変数を参照
Label1.Text = UserInput
```

### グローバル変数の例

ユーザーがアプリのどのスクリーンからでもアクセスできるユーザー名を設定する例です。

```plaintext
// ログイン時にユーザー名をグローバル変数に格納
Set(UserName, "山田太郎")

// 任意のスクリーンでユーザー名を表示
Label1.Text = UserName
```

### コレクションの例

商品リストをコレクションに追加し、それを表示する例です。

```plaintext
// コレクションに商品データを追加
Collect(Products, {ProductName: "ノートパソコン", Price: 100000}, {ProductName: "タブレット", Price: 50000})

Galleryコントロールで商品リストを表示する例です。

```plaintext
// 商品リストを表示するためのGalleryコントロールを配置し、そのItemsプロパティに「Products」コレクションを設定
Gallery1.Items = Products
```

このように、コレクションを使用すると、複数のデータレコードを簡単に扱い、リストや表形式で表示することができます。

## 変数の活用ポイント

変数を上手く活用することで、PowerAppsでのアプリケーション開発がより柔軟でパワフルになります。以下に、変数を活用する際のポイントをいくつか挙げます。

### 1. スコープを理解する

- コンテキスト変数はスクリーン内でのみ有効であること、グローバル変数はアプリ全体で共有されることを意識して使用しましょう。

### 2. 命名規則を設ける

- 変数の目的や内容がわかりやすいように、一貫性のある命名規則を設けることが重要です。例えば、ユーザー入力を保存するコンテキスト変数なら`userInput`のように命名します。

### 3. コレクションの活用

- 複数の関連データを扱う場合には、コレクションを積極的に使用しましょう。データの追加、更新、削除が容易になり、データの一覧表示も簡単に行えます。

### 4. パフォーマンスへの影響を考慮する

- 特にグローバル変数や大きなコレクションは、アプリケーションのパフォーマンスに影響を与える可能性があります。必要な時にのみデータを更新し、不要になったデータは適宜クリアすることで、アプリケーションの応答性を保ちましょう。